{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst ADD = 'user/ADD';\nconst REMOVE = 'user/REMOVE';\n\nconst setSessionUser = user => {\n  return {\n    type: ADD,\n    user\n  };\n};\n\nconst removeSessionUser = () => {\n  return {\n    type: REMOVE\n  };\n};\n\nexport const login = user => async dispatch => {\n  const {\n    credential,\n    password\n  } = user;\n  const response = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setSessionUser(data.user));\n  return response;\n};\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setSessionUser(data.user));\n  return response;\n};\nexport const signup = user => async dispatch => {\n  const {\n    username,\n    email,\n    password\n  } = user;\n  const response = await csrfFetch('/api/users', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      email,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(setSessionUser(data.user));\n  return response;\n};\nexport const logout = () => async dispatch => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  });\n  dispatch(removeSessionUser());\n  return response;\n};\nconst initialState = {\n  user: null\n};\n\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState;\n\n  switch (action.type) {\n    case ADD:\n      newState = Object.assign({}, state);\n      newState.user = action.user;\n      return newState;\n      ;\n\n    case REMOVE:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default sessionReducer;","map":{"version":3,"names":["csrfFetch","ADD","REMOVE","setSessionUser","user","type","removeSessionUser","login","dispatch","credential","password","response","method","body","JSON","stringify","data","json","restoreUser","signup","username","email","logout","initialState","sessionReducer","state","action","newState","Object","assign"],"sources":["/home/jon/AppAcademy/portfolio/portfolio_1/frontend/src/store/session.js"],"sourcesContent":["import { csrfFetch } from './csrf';\n\nconst ADD = 'user/ADD';\nconst REMOVE = 'user/REMOVE';\n\n\nconst setSessionUser = (user) => {\n  return {\n    type: ADD,\n    user\n  }\n};\n\nconst removeSessionUser = () => {\n  return {\n    type: REMOVE\n  }\n};\n\nexport const login = (user) => async dispatch => {\n  const { credential, password } = user\n  const response = await csrfFetch('/api/session',\n    {method:'POST',\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n\n    const data = await response.json();\n    dispatch(setSessionUser(data.user));\n    return response;\n}\n\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setSessionUser(data.user));\n  return response;\n};\n\nexport const signup = (user) => async (dispatch) => {\n  const { username, email, password } = user;\n  const response = await csrfFetch('/api/users', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      email,\n      password,\n    }),\n  });\n  const data = await response.json();\n  dispatch(setSessionUser(data.user));\n  return response;\n};\n\nexport const logout = () => async (dispatch) => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  })\n\n    dispatch(removeSessionUser());\n  return response;\n};\n\nconst initialState = { user: null };\n\nconst sessionReducer = (state = initialState, action) => {\n  let newState;\n  switch (action.type) {\n    case ADD:\n      newState = Object.assign({}, state);\n      newState.user = action.user;\n      return newState;\n    ;\n    case REMOVE:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n    default:\n      return state;\n  }\n}\n\nexport default sessionReducer;\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,QAA1B;AAEA,MAAMC,GAAG,GAAG,UAAZ;AACA,MAAMC,MAAM,GAAG,aAAf;;AAGA,MAAMC,cAAc,GAAIC,IAAD,IAAU;EAC/B,OAAO;IACLC,IAAI,EAAEJ,GADD;IAELG;EAFK,CAAP;AAID,CALD;;AAOA,MAAME,iBAAiB,GAAG,MAAM;EAC9B,OAAO;IACLD,IAAI,EAAEH;EADD,CAAP;AAGD,CAJD;;AAMA,OAAO,MAAMK,KAAK,GAAIH,IAAD,IAAU,MAAMI,QAAN,IAAkB;EAC/C,MAAM;IAAEC,UAAF;IAAcC;EAAd,IAA2BN,IAAjC;EACA,MAAMO,QAAQ,GAAG,MAAMX,SAAS,CAAC,cAAD,EAC9B;IAACY,MAAM,EAAC,MAAR;IACAC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MACnBN,UADmB;MAEnBC;IAFmB,CAAf;EADN,CAD8B,CAAhC;EAQE,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACL,cAAc,CAACa,IAAI,CAACZ,IAAN,CAAf,CAAR;EACA,OAAOO,QAAP;AACH,CAbM;AAeP,OAAO,MAAMO,WAAW,GAAG,MAAM,MAAMV,QAAN,IAAkB;EACjD,MAAMG,QAAQ,GAAG,MAAMX,SAAS,CAAC,cAAD,CAAhC;EACA,MAAMgB,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACL,cAAc,CAACa,IAAI,CAACZ,IAAN,CAAf,CAAR;EACA,OAAOO,QAAP;AACD,CALM;AAOP,OAAO,MAAMQ,MAAM,GAAIf,IAAD,IAAU,MAAOI,QAAP,IAAoB;EAClD,MAAM;IAAEY,QAAF;IAAYC,KAAZ;IAAmBX;EAAnB,IAAgCN,IAAtC;EACA,MAAMO,QAAQ,GAAG,MAAMX,SAAS,CAAC,YAAD,EAAe;IAC7CY,MAAM,EAAE,MADqC;IAE7CC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MACnBK,QADmB;MAEnBC,KAFmB;MAGnBX;IAHmB,CAAf;EAFuC,CAAf,CAAhC;EAQA,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;EACAT,QAAQ,CAACL,cAAc,CAACa,IAAI,CAACZ,IAAN,CAAf,CAAR;EACA,OAAOO,QAAP;AACD,CAbM;AAeP,OAAO,MAAMW,MAAM,GAAG,MAAM,MAAOd,QAAP,IAAoB;EAC9C,MAAMG,QAAQ,GAAG,MAAMX,SAAS,CAAC,cAAD,EAAiB;IAC/CY,MAAM,EAAE;EADuC,CAAjB,CAAhC;EAIEJ,QAAQ,CAACF,iBAAiB,EAAlB,CAAR;EACF,OAAOK,QAAP;AACD,CAPM;AASP,MAAMY,YAAY,GAAG;EAAEnB,IAAI,EAAE;AAAR,CAArB;;AAEA,MAAMoB,cAAc,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBF,YAAyB;EAAA,IAAXG,MAAW;EACvD,IAAIC,QAAJ;;EACA,QAAQD,MAAM,CAACrB,IAAf;IACE,KAAKJ,GAAL;MACE0B,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,KAAlB,CAAX;MACAE,QAAQ,CAACvB,IAAT,GAAgBsB,MAAM,CAACtB,IAAvB;MACA,OAAOuB,QAAP;MACF;;IACA,KAAKzB,MAAL;MACEyB,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,KAAlB,CAAX;MACAE,QAAQ,CAACvB,IAAT,GAAgB,IAAhB;MACA,OAAOuB,QAAP;;IACF;MACE,OAAOF,KAAP;EAXJ;AAaD,CAfD;;AAiBA,eAAeD,cAAf"},"metadata":{},"sourceType":"module"}