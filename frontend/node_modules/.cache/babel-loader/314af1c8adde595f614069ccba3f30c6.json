{"ast":null,"code":"import _slicedToArray from\"/home/jon/AppAcademy/portfolio/portfolio_1/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./SlotSpinner.css';import{useEffect,useState}from'react';// the prop winRate determines approximately how often the slot will hit a win\n// (3 matching symbols). A value of 1 will win on every spin, a value of 5 will\n// will win once every 5 spins\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SlotSpinner=function SlotSpinner(_ref){var winRate=_ref.winRate,IconArr=_ref.IconArr;//function used to select randomly from icon array\nvar randomArrFunc=function randomArrFunc(){return IconArr[Math.floor(Math.random()*IconArr.length)];};var _useState=useState(randomArrFunc()),_useState2=_slicedToArray(_useState,2),displayIconOne=_useState2[0],setDisplayIconOne=_useState2[1];var _useState3=useState(randomArrFunc()),_useState4=_slicedToArray(_useState3,2),displayIconTwo=_useState4[0],setDisplayIconTwo=_useState4[1];var _useState5=useState(randomArrFunc()),_useState6=_slicedToArray(_useState5,2),displayIconThree=_useState6[0],setDisplayIconThree=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),rerunAnim=_useState8[0],setRerunAnim=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),prizeTrigger=_useState10[0],setPrizeTrigger=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),trigger=_useState12[0],setTrigger=_useState12[1];// variables for animation intervals and timeouts, need to be in function scope for\n// access outside of where the timeouts are declared\nvar spinnerInterval;var loseTimeout;var winIconTimeout;var shortTimeout;var winTimeout;// main slot animation\nuseEffect(function(){// clearInterval(spinnerInterval);\n// clearTimeout(loseTimeout);\n// clearTimeout(winIconTimeout);\n// clearTimeout(shortTimeout);\n// clearTimeout(winTimeout);\n// starts animation by rendering icon div\nsetRerunAnim(true);// counter will determine how many times the icon will scroll by\n// there will be 2 extra scrolls, the starting and ending animations\n// counter increments below in spinnerInterval\nvar counter=0;// spinnerInterval runs once for every animation, currently set for half a second\n// if you change this interval here you will also need to change the duration of\n//css animation spinner_start, spinner, or spinner_end\n// (which would all need to be the same length as each other)\nspinnerInterval=setInterval(function(){var iconOne=randomArrFunc();var iconTwo=randomArrFunc();var iconThree=randomArrFunc();// conditional makes it very unlikely that it will organically land 3 matched symbols\n// since making the prizeTrigger run in this case breaks other parts of the component\nif(iconTwo===iconThree&&iconThree===iconOne){iconThree=randomArrFunc();}// sets each icon to the randomly selected variables above\nsetDisplayIconOne(iconOne);setDisplayIconTwo(iconTwo);setDisplayIconThree(iconThree);// increments counter which determines how many times to run the spinner\ncounter++;// once this conditional is met by the counter we determine if the spin will be a win or not\n// a series of timeouts will run the win animation, or reset the reel to spin again on a\n// non-win\nif(counter===6){var bigWin=Math.floor(Math.random()*winRate);if(bigWin===0){var winIcon=randomArrFunc();setDisplayIconOne(winIcon);setDisplayIconTwo(winIcon);setDisplayIconThree(winIcon);clearInterval(spinnerInterval);clearTimeout(loseTimeout);winIconTimeout=setTimeout(function(){setRerunAnim(false);clearTimeout(winIconTimeout);},700);shortTimeout=setTimeout(function(){setPrizeTrigger(true);clearTimeout(shortTimeout);},500);winTimeout=setTimeout(function(){setPrizeTrigger(false);setTrigger(function(prev){return!prev;});clearTimeout(winTimeout);},9500);return;}clearInterval(spinnerInterval);// this timeout runs if there isn't a win to start the spinner again\nloseTimeout=setTimeout(function(){setRerunAnim(false);setTrigger(function(prev){return!prev;});clearTimeout(loseTimeout);},2000);}},500);},[trigger]);return/*#__PURE__*/_jsx(\"div\",{id:\"slotMachineContainer\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"fullSpinnerRow\",children:[prizeTrigger&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize1\"}),/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize2\"}),/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize3\"}),/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize4\"}),/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize5\"}),/*#__PURE__*/_jsx(\"img\",{src:displayIconOne,width:\"100\",className:\"prizeIcon\",id:\"prize6\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"spinnerContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bpmValueDisplaySpinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinnerHighlight\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"el1\",children:[rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconOne\",src:displayIconOne,width:\"80px\"}),!rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconOneWin\",src:displayIconOne,width:\"80px\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"spinnerContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bpmValueDisplaySpinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinnerHighlight\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"el2\",children:[rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconTwo\",src:displayIconTwo,width:\"80px\"}),!rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconTwoWin\",src:displayIconTwo,width:\"80px\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"spinnerContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bpmValueDisplaySpinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinnerHighlight\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"el3\",children:[rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconThree\",src:displayIconThree,width:\"80px\"}),!rerunAnim&&/*#__PURE__*/_jsx(\"img\",{id:\"spinnerIconThreeWin\",src:displayIconThree,width:\"80px\"})]})]})})]})});};export default SlotSpinner;","map":{"version":3,"names":["useEffect","useState","SlotSpinner","winRate","IconArr","randomArrFunc","Math","floor","random","length","displayIconOne","setDisplayIconOne","displayIconTwo","setDisplayIconTwo","displayIconThree","setDisplayIconThree","rerunAnim","setRerunAnim","prizeTrigger","setPrizeTrigger","trigger","setTrigger","spinnerInterval","loseTimeout","winIconTimeout","shortTimeout","winTimeout","counter","setInterval","iconOne","iconTwo","iconThree","bigWin","winIcon","clearInterval","clearTimeout","setTimeout","prev"],"sources":["/home/jon/AppAcademy/portfolio/portfolio_1/frontend/src/components/SlotSpinner/SlotSpinner.js"],"sourcesContent":["import './SlotSpinner.css';\nimport { useEffect, useState } from 'react';\n\n// the prop winRate determines approximately how often the slot will hit a win\n// (3 matching symbols). A value of 1 will win on every spin, a value of 5 will\n// will win once every 5 spins\nconst SlotSpinner = ({ winRate, IconArr}) => {\n\n  //function used to select randomly from icon array\n  const randomArrFunc = () => {\n    return IconArr[Math.floor(Math.random() * IconArr.length)];\n  };\n\n  const [displayIconOne, setDisplayIconOne] = useState(randomArrFunc());\n  const [displayIconTwo, setDisplayIconTwo] = useState(randomArrFunc());\n  const [displayIconThree, setDisplayIconThree] = useState(randomArrFunc());\n  const [rerunAnim, setRerunAnim] = useState(false);\n  const [prizeTrigger, setPrizeTrigger] = useState(false);\n  const [trigger, setTrigger] = useState(false);\n\n  // variables for animation intervals and timeouts, need to be in function scope for\n  // access outside of where the timeouts are declared\n  let spinnerInterval;\n  let loseTimeout;\n  let winIconTimeout;\n  let shortTimeout;\n  let winTimeout;\n\n  // main slot animation\n  useEffect(() => {\n    // clearInterval(spinnerInterval);\n    // clearTimeout(loseTimeout);\n    // clearTimeout(winIconTimeout);\n    // clearTimeout(shortTimeout);\n    // clearTimeout(winTimeout);\n\n    // starts animation by rendering icon div\n    setRerunAnim(true);\n\n    // counter will determine how many times the icon will scroll by\n    // there will be 2 extra scrolls, the starting and ending animations\n    // counter increments below in spinnerInterval\n    let counter = 0;\n\n    // spinnerInterval runs once for every animation, currently set for half a second\n    // if you change this interval here you will also need to change the duration of\n    //css animation spinner_start, spinner, or spinner_end\n    // (which would all need to be the same length as each other)\n\n    spinnerInterval = setInterval(()=> {\n      let iconOne = randomArrFunc();\n      let iconTwo = randomArrFunc();\n      let iconThree = randomArrFunc();\n\n      // conditional makes it very unlikely that it will organically land 3 matched symbols\n      // since making the prizeTrigger run in this case breaks other parts of the component\n\n      if (iconTwo === iconThree && iconThree === iconOne) {\n        iconThree = randomArrFunc();\n      }\n\n      // sets each icon to the randomly selected variables above\n\n      setDisplayIconOne(iconOne);\n      setDisplayIconTwo(iconTwo);\n      setDisplayIconThree(iconThree);\n\n      // increments counter which determines how many times to run the spinner\n      counter++;\n\n      // once this conditional is met by the counter we determine if the spin will be a win or not\n      // a series of timeouts will run the win animation, or reset the reel to spin again on a\n      // non-win\n\n      if (counter === 6) {\n        const bigWin = Math.floor(Math.random() * winRate);\n        if (bigWin === 0) {\n          const winIcon = randomArrFunc();\n          setDisplayIconOne(winIcon);\n          setDisplayIconTwo(winIcon);\n          setDisplayIconThree(winIcon);\n          clearInterval(spinnerInterval);\n          clearTimeout(loseTimeout);\n          winIconTimeout = setTimeout(() => {\n            setRerunAnim(false);\n            clearTimeout(winIconTimeout);\n          }, 700)\n          shortTimeout = setTimeout(() => {\n            setPrizeTrigger(true);\n            clearTimeout(shortTimeout);\n          }, 500)\n          winTimeout = setTimeout(() => {\n            setPrizeTrigger(false);\n            setTrigger(prev => !prev);\n            clearTimeout(winTimeout);\n          }, 9500)\n          return;\n        }\n        clearInterval(spinnerInterval);\n\n        // this timeout runs if there isn't a win to start the spinner again\n        loseTimeout = setTimeout(() => {\n          setRerunAnim(false);\n          setTrigger(prev => !prev);\n          clearTimeout(loseTimeout)\n        }, 2000)\n      }\n    }, 500);\n  },[trigger])\n\n  return (\n    <div id='slotMachineContainer'>\n      <div id='fullSpinnerRow'>\n        {prizeTrigger &&\n          <>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize1'/>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize2'/>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize3'/>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize4'/>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize5'/>\n            <img src={displayIconOne} width=\"100\" className='prizeIcon' id='prize6'/>\n          </>\n        }\n        <div className='spinnerContainer'>\n          {/* <BpmCoin classPass={classPass}/> */}\n          <div className='bpmValueDisplaySpinner'>\n          <div className='spinnerHighlight'></div>\n            <div id='el1'>\n              {rerunAnim &&\n                <img id='spinnerIconOne' src={displayIconOne} width='80px'/>\n              }\n              {!rerunAnim &&\n                <img id='spinnerIconOneWin' src={displayIconOne} width='80px'/>\n              }\n            </div>\n          </div>\n        </div>\n        <div className='spinnerContainer'>\n          {/* <BpmCoin classPass={classPass}/> */}\n          <div className='bpmValueDisplaySpinner'>\n          <div className='spinnerHighlight'></div>\n            <div id='el2'>\n              {rerunAnim &&\n                <img id='spinnerIconTwo' src={displayIconTwo} width='80px'/>\n              }\n              {!rerunAnim &&\n                <img id='spinnerIconTwoWin' src={displayIconTwo} width='80px'/>\n              }\n            </div>\n          </div>\n        </div>\n        <div className='spinnerContainer'>\n          {/* <BpmCoin classPass={classPass}/> */}\n          <div className='bpmValueDisplaySpinner'>\n          <div className='spinnerHighlight'></div>\n            <div id='el3'>\n              {rerunAnim &&\n                <img id='spinnerIconThree' src={displayIconThree} width='80px'/>\n              }\n              {!rerunAnim &&\n                <img id='spinnerIconThreeWin' src={displayIconThree} width='80px'/>\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* <div id='slotBottom'>Always a winning combination!</div> */}\n    </div>\n  )\n};\n\nexport default SlotSpinner;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}